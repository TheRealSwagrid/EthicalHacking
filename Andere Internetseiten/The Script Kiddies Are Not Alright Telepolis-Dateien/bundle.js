!function(){"use strict";const e=e=>new Promise(((t,r)=>{const n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e.url),e.integrity&&n.setAttribute("integrity",e.integrity),e.async&&n.setAttribute("async",e.async.toString()),e.defer&&n.setAttribute("defer",e.defer.toString()),e.crossOrigin&&n.setAttribute("crossorigin",e.crossOrigin),n.onload=t,n.onerror=r,document.head.appendChild(n)})),t=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),r=e=>"array"===t(e)?!!e.length:null!=e&&!Number.isNaN(e)&&(!1===e||(e instanceof Date?!Number.isNaN(e.getTime()):"object"===t(e)?!!Object.keys(e).length:!!String(e).length)),n=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},s="acadaeafagaialamaoaqarasatauawaxazbabbbdbebfbgbhbibjbmbnbobrbsbtbwbybzcacccdcfcgchcickclcmcncocrcucvcwcxcyczdjdkdmdodzeceeegereseteufifjfkfmfofrgagdgegfggghgiglgmgngpgqgrgsgtgugwgyhkhmhnhrhthuidieiliminioiqirisitjejmjojpkekgkhkikmknkpkrkwkykzlalblclilklrlsltlulvlymamcmdmemgmhmkmlmmmnmompmqmrmsmtmumvmwmxmymznancnenfngninlnonpnrnunzompapepfpgphpkplpmpnprpsptpwpyqarerorsrurwsasbscsdsesgshsiskslsmsnsosrssstsvsxsysztctdtftgthtjtktltmtntotrtttvtwtzuaugukusuyuzvavcvevgvivnvuwfwsyeytzazmzw".match(/.{1,2}(?=(.{2})+(?!.))|.{1,2}$/g),i=(e,r)=>{if("object"!==t(e))return e;const n={},s=Object.keys(e),a=Object.keys(r);for(let o=0,c=s.length;o<c;o+=1){const c=s[o],u=e[c],d=a.indexOf(c)>-1?r[c]:c;if("object"===t(u))n[d]=i({...u},r);else if("array"===t(u)){n[d]=[...u];for(let e=0,t=u.length;e<t;e+=1)n[d][e]=i(u[e],r)}else n[d]=u}return n};var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var o=function(e,t){return e===t||e!=e&&t!=t},c="object"==typeof a&&a&&a.Object===Object&&a,u=c,d="object"==typeof self&&self&&self.Object===Object&&self,l=u||d||Function("return this")(),m=l.Symbol,h=m,p=Object.prototype,E=p.hasOwnProperty,f=p.toString,g=h?h.toStringTag:void 0;var y=function(e){var t=E.call(e,g),r=e[g];try{e[g]=void 0;var n=!0}catch(e){}var s=f.call(e);return n&&(t?e[g]=r:delete e[g]),s},v=Object.prototype.toString;var S=y,b=function(e){return v.call(e)},O=m?m.toStringTag:void 0;var _=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?S(e):b(e)};var T=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},I=_,A=T;var N=function(e){if(!A(e))return!1;var t=I(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var R=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},C=N,w=R;var D=function(e){return null!=e&&w(e.length)&&!C(e)},M=/^(?:0|[1-9]\d*)$/;var P=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&M.test(e))&&e>-1&&e%1==0&&e<t};var L=function(e){return null!=e&&"object"==typeof e};let k="~";function j(){}Object.create&&(j.prototype=Object.create(null),(new j).__proto__||(k=!1));class x{constructor(e,t,r=!1){this.handler=e,this.context=t,this.once=r}}function V(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The handler must be a function.");if("symbol"==typeof t&&e._prefix)throw new TypeError("The event name cannot be a symbol when events should be prefixed. Use string literals instead.");const i=new x(r,n||e,s),a=e._prefix?`${e._prefix}${t}`:t;return e._listeners[a]||(e._listeners[a]=[],e._listenerCount+=1),e._listeners[a].push(i),e}function F(e,t){const r=e._prefix?`${e._prefix}${t}`:t;0==--e._listenerCount?e._listeners=new j:delete e._listeners[r]}class U{constructor(){this._prefix=k,this._listeners=new j,this._listenerCount=0}has(e){if("symbol"==typeof e)return Object.getOwnPropertySymbols(this._listeners).includes(e);const t=this._prefix?`${this._prefix}${e}`:e;return Object.keys(this._listeners).includes(t)}eventNames(){let e=[];return 0===this._listenerCount||(e=e.concat(Object.keys(this._listeners).map((e=>this._prefix?e.slice(1):e))),Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(this._listeners)))),e}on(e,t,r){return V(this,e,t,r)}once(e,t,r){return V(this,e,t,r,!0)}off(e,t,r,n=!1){const s=this._prefix?`${this._prefix}${e}`:e;if(!this.has(e))return this;const i=this._listeners[s];if(!t||i.length<=1)return F(this,s),this;const a=i.findIndex((e=>e.handler===t&&e.context===(r||this)&&e.once===n));return a>-1&&i.splice(a,1),this}clear(e){const t=this._prefix?`${this._prefix}${e}`:e;return this.has(e)?F(this,t):(this._listeners=new j,this._listenerCount=0),this}emit(e,...t){if(!this.has(e))return!1;const r=this._prefix?`${this._prefix}${e}`:e,n=this._listeners[r];for(let e=n.length;e>=0;e-=1){const s=n[e];if(s){const{handler:e,once:n,context:i}=s;n&&this.off(r,e,i,n),e.call(i,...t)}}return!0}}var G=function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s},q=G;var z,$=function(e,t){return q(t,(function(t){return[t,e[t]]}))},Y=l["__core-js_shared__"],B=(z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var H=function(e){return!!B&&B in e},J=Function.prototype.toString;var Q=function(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""},X=N,W=H,K=T,Z=Q,ee=/^\[object .+?Constructor\]$/,te=Function.prototype,re=Object.prototype,ne=te.toString,se=re.hasOwnProperty,ie=RegExp("^"+ne.call(se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ae=function(e){return!(!K(e)||W(e))&&(X(e)?ie:ee).test(Z(e))},oe=function(e,t){return null==e?void 0:e[t]};var ce=function(e,t){var r=oe(e,t);return ae(r)?r:void 0},ue=ce(l,"DataView"),de=ce(l,"Map"),le=ce(l,"Promise"),me=ce(l,"Set"),he=ue,pe=de,Ee=le,fe=me,ge=ce(l,"WeakMap"),ye=_,ve=Q,Se="[object Map]",be="[object Promise]",Oe="[object Set]",_e="[object WeakMap]",Te="[object DataView]",Ie=ve(he),Ae=ve(pe),Ne=ve(Ee),Re=ve(fe),Ce=ve(ge),we=ye;(he&&we(new he(new ArrayBuffer(1)))!=Te||pe&&we(new pe)!=Se||Ee&&we(Ee.resolve())!=be||fe&&we(new fe)!=Oe||ge&&we(new ge)!=_e)&&(we=function(e){var t=ye(e),r="[object Object]"==t?e.constructor:void 0,n=r?ve(r):"";if(n)switch(n){case Ie:return Te;case Ae:return Se;case Ne:return be;case Re:return Oe;case Ce:return _e}return t});var De=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var Me=$,Pe=we,Le=De,ke=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r};var je=function(e){return function(t){var r=Pe(t);return"[object Map]"==r?Le(t):"[object Set]"==r?ke(t):Me(t,e(t))}};var xe=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Ve=_,Fe=L;var Ue=function(e){return Fe(e)&&"[object Arguments]"==Ve(e)},Ge=L,qe=Object.prototype,ze=qe.hasOwnProperty,$e=qe.propertyIsEnumerable,Ye=Ue(function(){return arguments}())?Ue:function(e){return Ge(e)&&ze.call(e,"callee")&&!$e.call(e,"callee")},Be=Ye,He=Array.isArray,Je={exports:{}};var Qe=function(){return!1};!function(e,t){var r=l,n=Qe,s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,a=i&&i.exports===s?r.Buffer:void 0,o=(a?a.isBuffer:void 0)||n;e.exports=o}(Je,Je.exports);var Xe=_,We=R,Ke=L,Ze={};Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Arguments]"]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object Boolean]"]=Ze["[object DataView]"]=Ze["[object Date]"]=Ze["[object Error]"]=Ze["[object Function]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze["[object Object]"]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object WeakMap]"]=!1;var et=function(e){return Ke(e)&&We(e.length)&&!!Ze[Xe(e)]};var tt=function(e){return function(t){return e(t)}},rt={exports:{}};!function(e,t){var r=c,n=t&&!t.nodeType&&t,s=n&&e&&!e.nodeType&&e,i=s&&s.exports===n&&r.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(rt,rt.exports);var nt=et,st=tt,it=rt.exports,at=it&&it.isTypedArray,ot=at?st(at):nt,ct=xe,ut=Be,dt=He,lt=Je.exports,mt=P,ht=ot,pt=Object.prototype.hasOwnProperty;var Et=function(e,t){var r=dt(e),n=!r&&ut(e),s=!r&&!n&&lt(e),i=!r&&!n&&!s&&ht(e),a=r||n||s||i,o=a?ct(e.length,String):[],c=o.length;for(var u in e)!t&&!pt.call(e,u)||a&&("length"==u||s&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mt(u,c))||o.push(u);return o},ft=Object.prototype;var gt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ft)};var yt=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),vt=gt,St=yt,bt=Object.prototype.hasOwnProperty;var Ot=Et,_t=function(e){if(!vt(e))return St(e);var t=[];for(var r in Object(e))bt.call(e,r)&&"constructor"!=r&&t.push(r);return t},Tt=D;var It=function(e){return Tt(e)?Ot(e):_t(e)},At=je(It),Nt=G;var Rt=function(e,t){return Nt(t,(function(t){return e[t]}))},Ct=It;var wt=function(e){return null==e?[]:Rt(e,Ct(e))};const Dt=(e,t,r,n={})=>{const s=["namespace","module","method","message"][t],i=r[e[s]-1];return i&&(n[s]=i.text,i.children&&i.children.length)?Dt(e,t+1,i.children,n):n};class Mt{get level(){return Object.keys(Mt.TYPES)[this.type-1].toLowerCase()}get plainData(){return{createdAt:new Date(this.createdAt).toJSON(),level:this.level,namespace:this.namespace,module:this.module,method:this.method,message:this.message,internalMessage:this.internalMessage}}constructor(e,t,r,n,s,i){this.type=e,this.namespace=t,this.module=r,this.method=n,this.message=s,this.internalMessage=i,this.createdAt=Date.now()}includes(e){return!!this.internalMessage&&this.internalMessage.includes(e)}toJSON(e=!1){const{plainData:t}=this;return JSON.stringify(e?i(t,Mt.SHORTNAME_MAPPING):t)}prettify(e,t,r={abbreviate:!1,prefix:void 0,delimiter:" | "}){if(!0===wt(Mt.FORMATS).includes(e)){const{plainData:n}=this,s={...n,...Dt(n,0,t)};if(e===Mt.FORMATS.JSON)return JSON.stringify(r.abbreviate?i(s,Mt.SHORTNAME_MAPPING):s);let a=[];return a=a.concat(At(s).map((([e,t])=>`${e.toUpperCase()}:${t}`))),r.prefix&&a.push(r.prefix),a.reverse().join(r.delimiter)}return""}}Mt.TYPES=Object.defineProperties({},{INFO:{value:1,enumerable:!0},WARNING:{value:2,enumerable:!0},ERROR:{value:3,enumerable:!0},FATAL:{value:4,enumerable:!0}}),Mt.FORMATS=Object.defineProperties({},{JSON:{value:1,enumerable:!0},LOG:{value:2,enumerable:!0}}),Mt.fromJSON=e=>{const t=JSON.parse(e);if(t.level&&void 0===t.type){const[,e]=At(Mt.TYPES).find((([e])=>e.toLowerCase()===t.level));t.type=e}const{type:r,namespace:n,module:s,method:i,message:a,internalMessage:o}=t;return new Mt(r,n,s,i,a,o)},Mt.SHORTNAME_MAPPING={level:"lv",type:"tp",namespace:"ns",module:"md",method:"mt",message:"ms",internalMessage:"im",createdAt:"ca"};const Pt=Date.now().toString(16).length,Lt="___iom_lso_data___",kt=Lt.length,jt="___iom_lso_exp___",xt=jt.length,Vt=["object","array"];class Ft extends U{constructor(e={},t=window){super(),this.moduleId=7,this.global=t,this.options={useExpireAttribute:!1,useDataMarker:!1,...e}}getItem(e){const t=this.global.localStorage.getItem(e);let{value:s,attributes:i}=(e=>{const t={};let s,i=0;return e&&(e.substring(0,xt)===jt&&(i+=xt+Pt,t.expire=new Date(parseInt(e.substring(xt,i),16))),e.substring(i,kt)===Lt&&(i+=kt),s=e.substring(i,e.length),n(s)&&(s=JSON.parse(s))),{value:r(s)?s:void 0,attributes:r(t)?t:void 0}})(t);return this.options.useExpireAttribute&&i&&i.expire&&i.expire.getTime()<Date.now()&&(s=void 0,i=void 0,this.removeItem(e)),{key:e,value:s,attributes:i}}getItems(e){return e.reduce(((e,t)=>(e.push(this.getItem(t)),e)),[])}setItem(e,r,n){const s=((e,r,n)=>{let s="";return n.useExpireAttribute&&r&&r.expire&&(s+=`___iom_lso_exp___${r.expire.getTime().toString(16)}`),n.useDataMarker&&(s+=Lt),Vt.includes(t(e))?s+=JSON.stringify(e):s+=e.toString(),s})(r,n,this.options);this.global.localStorage.setItem(e,s),this.emit(Ft.EVENTS.LOCAL_STORAGE_ITEM_SET,{key:e,value:r,attributes:n})}setItems(e){e.forEach((({key:e,value:t,attributes:r})=>this.setItem(e,t,r)))}removeItem(e){this.global.localStorage.removeItem(e),this.emit(Ft.EVENTS.LOCAL_STORAGE_ITEM_REMOVED,e)}removeItems(e){e.forEach((e=>{this.removeItem(e)}))}}Ft.EVENTS={LOCAL_STORAGE_ITEM_SET:"LOCAL_STORAGE_ITEM_SET",LOCAL_STORAGE_ITEM_REMOVED:"LOCAL_STORAGE_ITEM_REMOVED"};class Ut{get size(){return this.items.length}constructor(e){this.items=[];for(let t=0,r=e.length;t<r;t+=1)this.enqueue(e[t])}enqueue(e){this.items.push(e)}dequeue(){return this.items.shift()}flush(){this.items=[]}}const Gt=(e,t)=>{try{const{options:n}=e;e.pending=!0;const s=Array.from(t),i=s.slice(1,s.length),a=s[0];let o,c=((e,t)=>{const{options:r,facades:n}=e;if(r.multiTenancy){const e="number"==typeof t[0]?t[0]:r.defaultTenant;return n.get(e)}return n.get(0)})(e,i);c||(c=((e,t)=>{const{facadeFactory:r,options:n}=e,s=r(e);if(n.multiTenancy){const r="number"==typeof t[0]?t[0]:n.defaultTenant;e.facades.set(r,s)}else e.facades.set(0,s);return s})(e,i)),o=!0===n.multiTenancy&&"number"==typeof i[0]?i.slice(1,i.length):i;const u=c[a](...o);!0===(r=u,Boolean(r&&"function"==typeof r.then))?u.then((t=>e.emit("executed",t))).catch((t=>e.emit("error",t))):e.emit("executed",a,u)}catch(t){e.emit("error",t)}var r};class qt extends U{constructor(e,t={},r=[]){super(),this.pending=!1,this.failed=!1,this.queue=new Ut(r),this.facades=new Map,this.facadeFactory=e,this.options={mode:1,multiTenancy:!1,continueOnError:!0,logging:!1,defaultTenant:1,onError:void 0,onExecuted:void 0,...t},this.on("executed",(e=>((e,t)=>{const{options:r}=e;r.onExecuted&&"function"==typeof r.onExecuted&&r.onExecuted(t),e.pending=!1,e.failed=!1,r.mode===qt.MODE.AUTO&&e.dequeue()})(this,e))),this.on("error",(e=>((e,t)=>{const{options:r}=e;r.logging&&console.error(t),r.onError&&"function"==typeof r.onError&&r.onError(t),e.pending=!1,e.failed=!0,!0===r.continueOnError&&r.mode===qt.MODE.AUTO&&e.dequeue()})(this,e))),this.queue.size>0&&this.options.mode===qt.MODE.AUTO&&this.dequeue()}flush(){this.queue.flush()}addFacadeFactory(e){this.facadeFactory=e,this.queue.size>0&&this.options.mode===qt.MODE.AUTO&&this.dequeue()}removeFacadeFactory(){this.facadeFactory=void 0,this.facades.clear()}dequeue(){if(!0===this.pending)setTimeout((()=>this.dequeue()),10);else{if(this.queue.size>0&&(!1===this.failed||!0===this.options.continueOnError)&&this.facadeFactory&&"function"==typeof this.facadeFactory){const e=this.queue.dequeue();Gt(this,e)}}}enqueue(...e){1===e.length&&"string"!=typeof e[0]?this.queue.enqueue(e[0]):this.queue.enqueue(e),this.options.mode===qt.MODE.AUTO&&this.dequeue()}push(...e){this.enqueue(...e)}}qt.MODE=Object.defineProperties({},{AUTO:{value:1,enumerable:!0},MANUAL:{value:2,enumerable:!0}});const zt=new Date("Thu, 01 Jan 1970 00:00:00 GMT"),$t={domain:"domain",path:"path",expires:"expires",maxAge:"max-age",sameSite:"samesite",secure:"secure"},Yt=(Bt=$t,Object.keys(Bt).reduce(((e,t)=>(e[Bt[t]]=t,e)),{}));var Bt;const Ht=e=>{const t=e.split(";"),r=decodeURIComponent(t[0]),n={},s=t.slice(1,t.length);for(let e=0,t=s.length;e<t;e+=1){const t=s[e];if(t.includes("=")){const e=t.split("="),[r,s]=e,i=Yt[r];i&&(n[i]=s)}else{const e=Yt[t];e&&(n[e]=!0)}}return n.expires&&(n.expires=new Date(n.expires)),n.maxAge&&(n.maxAge=parseInt(n.maxAge,10)),{value:r,attributes:n}};class Jt extends U{get available(){try{const e="1"===this.setItem(this.testName,"1").getItem(this.testName).value;return this.removeItem(this.testName),e}catch(e){return!1}}get items(){return(this.doc.cookie?this.doc.cookie.split("; "):[]).map((e=>{const t=e.split("=");let r=t.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1));const n=(e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent))(t[0]);return{name:n,...Ht(r)}}))}get stats(){return{size:this.items.map((e=>`${e.name};${e.value}`)).join("; ").length,count:this.items.length}}constructor(e,t={},r={normalizeDomain:!0}){super(),this.moduleId=4,this.doc=e,this.testName="iom_cookie_check",this.attributes=t,r.normalizeDomain&&t.domain&&(this.attributes.domain=(e=>{const t=e?e.split("."):[],r=t[t.length-1];let n=[],i="";if(s.includes(r)){for(let e=t.length-1;e>=0&&e>=t.length-3&&t[e].length<=4;e-=1)n.push(t[e]);n=n.reverse();for(let e=0,t=n.length;e<t;e+=1)i+=`.${n[e]}`}else i=t.slice(t.length-2,t.length).join(".");return i.includes(".")&&(i="."===i[0]?i:`.${i}`),i})(t.domain))}setItem(e,r,n={}){return void 0!==this.doc.cookie&&(this.doc.cookie=((e,r,n)=>{let s=`${e.replace(/[^#$&+^`|]/g,encodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")}=${encodeURIComponent(r)}`;const i=Object.keys($t);for(let e=0,r=i.length;e<r;e+=1){const r=i[e],a=$t[r];if(n[r]&&"boolean"!==t(n[r])){let e=n[r];"expires"===r&&(e=n[r].toUTCString()),s+=`;${a}=${e}`}else n[r]&&"boolean"===t(n[r])&&(s+=`;${a}`)}return s})(e,r,{...this.attributes,...n}),n.expires===zt?this.emit(Jt.EVENTS.COOKIE_REMOVED,{name:e}):this.emit(Jt.EVENTS.COOKIE_SET,{name:e,value:r})),this}getItem(e){return this.items.find((t=>t.name===e))||{value:void 0,attributes:void 0}}getItems(e){const t=this.items.filter((t=>e.test(t.name))),r=[];for(let e=0,n=t.length;e<n;e+=1)r.push(t[e]);return r}removeItem(e){const t={...this.attributes,expires:zt};return this.setItem(e,"",t)}removeItems(e){const t={...this.attributes,expires:zt},r=this.getItems(e);for(let e=0,n=r.length;e<n;e+=1){const{name:n}=r[e];this.setItem(n,"",t)}return this}}Jt.EVENTS={COOKIE_SET:"COOKIE_SET",COOKIE_REMOVED:"COOKIE_REMOVED"};const Qt={sandbox:["allow-scripts","allow-same-origin"]};class Xt extends U{get ready(){return void 0!==this.request}constructor(e={}){super(),this.moduleId=6,this.request=void 0,this.elements={},this.options={addTransportModeToPayload:!0,removeElementAfterLoaded:!1,...e}}create(e,t=Xt.TYPES.JSONP){let r=e;return this.options.addTransportModeToPayload&&(r+=`&mo=${Xt.MODES[t]}`),this.request={url:r,type:t},this}send(){return new Promise(((t,r)=>{if(this.ready){const{url:s,type:i}=this.request,a=e=>{!1===this.options.removeElementAfterLoaded?this.elements[this.request.type]=e.target:e.target.parentNode.removeChild(e.target),t()},o=()=>{const e=new Mt(Mt.TYPES.FATAL,2,this.moduleId,1,1);r(e)};if(this.elements[i]){const e=this.elements[i];e.parentNode.removeChild(e)}if(i===Xt.TYPES.JSONP)e({url:s}).then(a).catch(o);else if(i===Xt.TYPES.IFRAME)(n={url:s,...Qt},new Promise(((e,t)=>{const r=document.createElement("iframe");r.style.position="absolute",r.style.left="-999px",r.style.top="-999px",r.height="1px",r.width="1px","referrerPolicy"in r&&(r.referrerPolicy=n.referrerPolicy||"origin"),"allow"in r&&n.allow&&(r.allow=n.allow),"sandbox"in r&&n.sandbox&&r.sandbox.add(...n.sandbox),r.onload=e,r.onerror=t,r.src=n.url,document.body.appendChild(r)}))).then(a).catch(o);else if(i===Xt.TYPES.IMAGE)(e=>new Promise(((t,r)=>{const n=document.createElement("img");n.style.position="absolute",n.style.left="-999px",n.style.top="-999px",n.height=1,n.width=1,n.onload=t,n.onerror=r,n.src=e.url,document.body.appendChild(n)})))({url:s}).then(a).catch(o);else{const e=new Mt(Mt.TYPES.ERROR,2,this.moduleId,1,2);r(e)}}else{const e=new Mt(Mt.TYPES.FATAL,2,this.moduleId,1,3);r(e)}var n}))}}Xt.TYPES={JSONP:"JSONP",IFRAME:"IFRAME",IMAGE:"IMAGE"},Xt.MODES={JSONP:1,IFRAME:1,IMAGE:0};var Wt=At;const Kt=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Zt(e,t,r,n,s){return new Mt(e,t,r,n,s)}const er=(e,t)=>{const r=Wt(e),n=[];for(let e=0,s=t.length;e<s;e+=1){const s=t[e],i=r.find((([e])=>e===s.name||e===s.abbreviation));let a;i&&(a=i[1]),n.push({...s,value:a})}return n};class tr extends U{constructor(e){super(),this.moduleId=2,this.commands=e,this.parameters=void 0}parse(e,...t){const r=this.commands.find((t=>t.name===e||t.abbreviation===e));return r?(this.command=r,this.parameters=((e,t)=>{let r=[];const{parameters:s}=e;for(let e=0,o=s.length;e<o;e+=1){let o=s[e],c=t[e];if(n(c)&&(c=JSON.parse(c)),"function"===Kt(o)){const r=s[e](t);o=r&&1===r.length?r[0]:r}o&&(r="object"===Kt(c)?r.concat(er(c,o)):r.concat((i=c,a=o,[{...a,value:i}])))}var i,a;return r})(r,t),this.emit(tr.EVENTS.PARSING_SUCCEEDED,{command:r,parameters:this.parameters})):this.emit(tr.EVENTS.PARSING_FAILED,Zt(Mt.TYPES.ERROR,1,this.moduleId,1,1)),this}reset(){return this.command=void 0,this.parameters=void 0,this.emit(tr.EVENTS.PARSING_RESET,Zt(Mt.TYPES.INFO,1,this.moduleId,1,2)),this}}tr.EVENTS={PARSING_FAILED:"PARSING_FAILED",PARSING_SUCCEEDED:"PARSING_SUCCEEDED",PARSING_RESET:"PARSING_RESET"};const rr={VALIDATION_ASSERTED:"VALIDATION_ASSERTED",VALIDATION_ABORTED:"VALIDATION_ABORTED",VALIDATION_FAILED:"VALIDATION_FAILED",VALIDATION_SUCCEEDED:"VALIDATION_SUCCEEDED",VALIDATION_RESET:"VALIDATION_RESET",VALIDATION_VALUE_MODIFIED:"VALIDATION_VALUE_MODIFIED"},nr=e=>["requiredIf"].includes(e),sr=(e,t)=>{const{rules:r,value:n}=e,s=[];for(let i=0,a=r.length;i<a;i+=1){const{name:a,assert:o}=r[i];if(nr(a)){const r=t.find((t=>t.name===e.sibling));s.push({name:a,assertion:o(n,r.value)})}else s.push({name:a,assertion:o(n)})}return s},ir=(e,t,r)=>{let n=!1;e.parameters[t].assertions=[];for(let s=0,i=r.length;s<i;s+=1){const{assertion:i,name:a}=r[s];if(e.parameters[t].assertions.push(i),n=i instanceof Mt&&i.type===Mt.TYPES.FATAL,!0===n)return{abort:n,assertion:i};if("array"===Kt(i)){const[r,n,s]=i;e.parameters[t].value=r,e.emit(rr.VALIDATION_VALUE_MODIFIED,{rule:a,modified:r,origin:n},s)}e.emit(rr.VALIDATION_ASSERTED,a,Zt(Mt.TYPES.INFO,1,e.moduleId,2,3))}return{abort:n}};class ar extends tr{constructor(e){super(e),this.moduleId=3,this.valid=!1,this.lastAssertion=void 0}validate(){return this.command&&this.parameters&&this.parameters.length>0?(this.valid=(e=>{for(let t=0,r=e.parameters.length;t<r;t+=1){const r=sr(e.parameters[t],e.parameters),{abort:n,assertion:s}=ir(e,t,r);if(e.lastAssertion=s,n)return e.emit(rr.VALIDATION_ABORTED,s),!1}return!0})(this),!0===this.valid?this.emit(ar.EVENTS.VALIDATION_SUCCEEDED,{command:this.command,parameters:this.parameters}):this.emit(ar.EVENTS.VALIDATION_FAILED,Zt(Mt.TYPES.FATAL,1,this.moduleId,2,2))):this.emit(ar.EVENTS.VALIDATION_FAILED,Zt(Mt.TYPES.ERROR,1,this.moduleId,2,1)),this}reset(){return this.valid=!1,super.reset(),this}}ar.EVENTS={...tr.EVENTS,...rr};class or extends ar{constructor(e){super(e),this.moduleId=4,this.data=void 0}serialize(e=!1){return this.command&&this.parameters&&this.parameters.length>0&&(this.data=((e,t)=>{const r={};for(let n=0,s=e.length;n<s;n+=1)r[t?e[n].abbreviation:e[n].name]=e[n].value;return r})(this.parameters,e),this.emit(or.EVENTS.SERIALIZATION_SUCCEEDED,{command:this.command.name,parameters:this.data})),this}result(){return{command:this.command.name,parameters:this.data}}reset(){return this.data=void 0,super.reset()}}or.EVENTS={...ar.EVENTS,SERIALIZATION_SUCCEEDED:"SERIALIZATION_SUCCEEDED"};var cr=ce(Object,"create"),ur=cr;var dr=function(){this.__data__=ur?ur(null):{},this.size=0};var lr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},mr=cr,hr=Object.prototype.hasOwnProperty;var pr=function(e){var t=this.__data__;if(mr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return hr.call(t,e)?t[e]:void 0},Er=cr,fr=Object.prototype.hasOwnProperty;var gr=cr;var yr=dr,vr=lr,Sr=pr,br=function(e){var t=this.__data__;return Er?void 0!==t[e]:fr.call(t,e)},Or=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gr&&void 0===t?"__lodash_hash_undefined__":t,this};function _r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_r.prototype.clear=yr,_r.prototype.delete=vr,_r.prototype.get=Sr,_r.prototype.has=br,_r.prototype.set=Or;var Tr=_r;var Ir=function(){this.__data__=[],this.size=0},Ar=o;var Nr=function(e,t){for(var r=e.length;r--;)if(Ar(e[r][0],t))return r;return-1},Rr=Nr,Cr=Array.prototype.splice;var wr=Nr;var Dr=Nr;var Mr=Nr;var Pr=Ir,Lr=function(e){var t=this.__data__,r=Rr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Cr.call(t,r,1),--this.size,!0)},kr=function(e){var t=this.__data__,r=wr(t,e);return r<0?void 0:t[r][1]},jr=function(e){return Dr(this.__data__,e)>-1},xr=function(e,t){var r=this.__data__,n=Mr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vr.prototype.clear=Pr,Vr.prototype.delete=Lr,Vr.prototype.get=kr,Vr.prototype.has=jr,Vr.prototype.set=xr;var Fr=Tr,Ur=Vr,Gr=de;var qr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},zr=qr;var $r=function(e,t){var r=e.__data__;return zr(t)?r["string"==typeof t?"string":"hash"]:r.map},Yr=$r;var Br=$r;var Hr=$r;var Jr=$r;var Qr=function(){this.size=0,this.__data__={hash:new Fr,map:new(Gr||Ur),string:new Fr}},Xr=function(e){var t=Yr(this,e).delete(e);return this.size-=t?1:0,t},Wr=function(e){return Br(this,e).get(e)},Kr=function(e){return Hr(this,e).has(e)},Zr=function(e,t){var r=Jr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function en(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}en.prototype.clear=Qr,en.prototype.delete=Xr,en.prototype.get=Wr,en.prototype.has=Kr,en.prototype.set=Zr;var tn=en,rn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},nn=function(e){return this.__data__.has(e)};function sn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new tn;++t<r;)this.add(e[t])}sn.prototype.add=sn.prototype.push=rn,sn.prototype.has=nn;var an=sn;var on=function(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1};var cn=function(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1},un=on,dn=function(e){return e!=e},ln=cn;var mn=function(e,t,r){return t==t?ln(e,t,r):un(e,dn,r)};var hn=function(e,t){return!!(null==e?0:e.length)&&mn(e,t,0)>-1};var pn=function(e,t,r){for(var n=-1,s=null==e?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1};var En=function(e,t){return e.has(t)},fn=an,gn=hn,yn=pn,vn=G,Sn=tt,bn=En,On=Math.min;var _n=function(e,t,r){for(var n=r?yn:gn,s=e[0].length,i=e.length,a=i,o=Array(i),c=1/0,u=[];a--;){var d=e[a];a&&t&&(d=vn(d,Sn(t))),c=On(d.length,c),o[a]=!r&&(t||s>=120&&d.length>=120)?new fn(a&&d):void 0}d=e[0];var l=-1,m=o[0];e:for(;++l<s&&u.length<c;){var h=d[l],p=t?t(h):h;if(h=r||0!==h?h:0,!(m?bn(m,p):n(u,p,r))){for(a=i;--a;){var E=o[a];if(!(E?bn(E,p):n(e[a],p,r)))continue e}m&&m.push(p),u.push(h)}}return u};var Tn=function(e){return e};var In=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},An=Math.max;var Nn=function(e,t,r){return t=An(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=An(n.length-t,0),a=Array(i);++s<i;)a[s]=n[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=n[s];return o[t]=r(a),In(e,this,o)}};var Rn=function(e){return function(){return e}},Cn=ce,wn=function(){try{var e=Cn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Dn=Rn,Mn=wn,Pn=Mn?function(e,t){return Mn(e,"toString",{configurable:!0,enumerable:!1,value:Dn(t),writable:!0})}:Tn,Ln=Date.now;var kn=function(e){var t=0,r=0;return function(){var n=Ln(),s=16-(n-r);if(r=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},jn=kn(Pn),xn=Tn,Vn=Nn,Fn=jn;var Un=function(e,t){return Fn(Vn(e,t,xn),e+"")},Gn=D,qn=L;var zn=function(e){return qn(e)&&Gn(e)},$n=zn;var Yn=G,Bn=_n,Hn=function(e){return $n(e)?e:[]},Jn=Un((function(e){var t=Yn(e,Hn);return t.length&&t[0]===e[0]?Bn(t):[]}));const Qn=e=>"array"===Kt(e)?!!e.length:null!=e&&!Number.isNaN(e)&&(!1===e||(e instanceof Date?!Number.isNaN(e.getTime()):"object"===Kt(e)?!!Object.keys(e).length:!!String(e).length)),Xn=e=>t=>!Qn(t)||null!==t.toString().match(e),Wn=Xn(/^[a-zA-Z0-9]*$/),Kn=Xn(/[ -~]/),Zn=(e,t)=>r=>!Qn(r)||(!/\s/.test(r)||r instanceof Date)&&e<=+r&&t>=+r,es=Xn(/(^[0-9]*$)|(^-[0-9]+$)/),ts=e=>"array"===Kt(e)?e.length:"object"===Kt(e)?Object.keys(e).length:String(e).length,rs=e=>t=>!Qn(t)||ts(t)<=e,ns=e=>t=>!Qn(t)||ts(t)>=e,ss=Xn(/^\d*(\.\d+)?$/),is=e=>t=>!Qn(t)||e.indexOf(t)>-1,as=e=>t=>!Qn(t)||Kt(t)===e,os=Xn(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function cs(e,t){return(...r)=>e(...r)||t()}class us extends U{constructor(e,t,r={maxExecutionBeforeStop:3,fillParameters:!1}){super(),this.moduleId=4,this.history=new Map,this.stats={},this.data={},this.commandQueue=e,this.commandSerializer=new or(t),this.options=r}process(e,...t){try{let r;const n=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(n){const{abbreviation:s,name:i}=n;if(void 0===this.stats[s]&&(this.stats[s]=0),this.options.fillParameters&&!1===Qn(t)&&this.data[s])return r={command:i,parameters:this.data[s]},this.emit(us.EVENTS.PROCESSING_SUCCEEDED,r),r;const{valid:a,stop:o}=((e,t,r,n)=>{let s=!0,i=!1;if(e.dependencies&&e.dependencies.length>0){const a=Array.from(t.keys());s=Jn(a,e.dependencies).length===e.dependencies.length,i=r[e.abbreviation]>n}return{stop:i,valid:s}})(n,this.history,this.stats,this.options.maxExecutionBeforeStop);if(!0===a&&!1===o)if(this.commandSerializer.reset().parse(e,...t).validate(),this.commandSerializer.valid){r=this.commandSerializer.serialize().result();const e="function"==typeof n.id?n.id(r.parameters):n.id;this.history.set(e,{parameters:t,createdAt:Date.now()}),this.stats[s]=0,this.data[s]=r.parameters,this.emit(us.EVENTS.PROCESSING_SUCCEEDED,r)}else this.stats[s]+=1,this.emit(us.EVENTS.PROCESSING_FAILED,this.commandSerializer.lastAssertion);else!1===a&&!1===o?(this.stats[s]+=this.stats[s]+1,this.commandQueue.enqueue(e,...t),this.emit(us.EVENTS.PROCESSING_REQUEUED,new Mt(Mt.TYPES.WARNING,1,this.moduleId,1,1))):this.emit(us.EVENTS.PROCESSING_FAILED,new Mt(Mt.TYPES.FATAL,1,this.moduleId,1,2))}return r}catch(e){const t=new Mt(Mt.TYPES.FATAL,1,this.moduleId,1,3,e.message);return void this.emit(us.EVENTS.PROCESSING_FAILED,t)}}getCommandParameters(e){const t=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(t)return this.data[t.abbreviation]}reset(){this.commandSerializer.reset(),this.stats={},this.history=new Map,this.data={}}}us.EVENTS={PROCESSING_SUCCEEDED:"PROCESSING_SUCCEEDED",PROCESSING_FAILED:"PROCESSING_FAILED",PROCESSING_REQUEUED:"PROCESSING_REQUEUED"};const ds=e=>({name:"appSite",abbreviation:"as",sibling:"hybrid",rules:e}),ls=e=>({name:"consentString",abbreviation:"ct",rules:e}),ms=e=>({name:"country",abbreviation:"cn",rules:e}),hs=e=>({name:"debug",abbreviation:"dg",rules:e}),ps=e=>({name:"distributionChannel",abbreviation:"dc",rules:e}),Es=e=>({name:"domainServiceName",abbreviation:"dn",rules:e}),fs=e=>({name:"hybrid",abbreviation:"hy",rules:e}),gs=e=>({name:"site",abbreviation:"st",rules:e}),ys=e=>({name:"tenant",abbreviation:"ta",rules:e}),vs=(e,t,r)=>n=>e(n)||[t,n,Zt(2,...r)],Ss=(e,t)=>({name:e,assert:t}),bs=[Ss("required",vs(Qn,void 0,[1,1,1,1])),Ss("typeOf",vs(as("string"),void 0,[1,1,1,2])),Ss("uri",vs(os,void 0,[1,1,1,3]))],Os=(Ss("required",cs(Qn,(()=>Zt(4,1,1,2,1)))),Ss("typeOf",cs(as("number"),(()=>Zt(4,1,1,2,2)))),Ss("integer",cs(es,(()=>Zt(4,1,1,2,3)))),Ss("required",cs(Qn,(()=>Zt(4,1,1,3,1)))),Ss("typeof",cs(as("number"),(()=>Zt(4,1,1,3,2)))),Ss("integer",cs(es,(()=>Zt(4,1,1,3,3)))),Ss("required",cs(Qn,(()=>Zt(4,1,1,4,1)))),Ss("typeof",cs(as("string"),(()=>Zt(4,1,1,4,2)))),Ss("uri",cs(os,(()=>Zt(4,1,1,4,3)))),[Ss("required",vs(Qn,void 0,[1,1,5,1])),Ss("typeOf",cs(as("string"),(()=>Zt(4,1,1,5,2)))),Ss("alphanumeric",cs(Wn,(()=>Zt(4,1,1,5,3)))),Ss("min",cs(ns(3),(()=>Zt(4,1,1,5,4)))),Ss("max",cs(rs(15),(()=>Zt(4,1,1,5,5))))]),_s=(e,t)=>r=>{if(Qn(r)&&!1===rs(e)(r)){let n;return n="number"===Kt(r)?((e,t)=>{let r=e.toString();return r=r.slice(0,t),parseInt(r,10)})(r,e):"array"===Kt(r)||"string"===Kt(r)?r.slice(0,e):"object"===Kt(r)?((e,t)=>{const r=Object.keys(e),n={};for(let s=0,i=t;s<i;s+=1)n[r[s]]=e[r[s]];return n})(r,e):r,[n,r,Zt(2,...t)]}return!0},Ts="Leercode_nichtzuordnungsfaehig",Is=["qds","dcf","nid"],As=[Ss("required",vs(Qn,Ts,[1,1,6,1])),Ss("typeOf",vs(as("string"),Ts,[1,1,6,2])),Ss("sanitize",(Ns=/[^a-zA-Z0-9,_/\-?#]/g,Rs=".",Cs=[1,1,6,3],e=>!Qn(e)||[e.replace(Ns,Rs),e,Zt(2,...Cs)])),Ss("truncate",_s(256,[1,1,6,4]))];var Ns,Rs,Cs;const ws=[Ss("defined",vs(Qn,void 0,[1,1,7,1])),Ss("typeOf",vs(as("string"),void 0,[1,1,7,2])),Ss("ascii",vs(Kn,void 0,[1,1,7,3])),Ss("truncate",_s(256,[1,1,7,4]))],Ds=(e=!0)=>{const t=[Ss("required",cs(Qn,(()=>Zt(4,1,1,8,1)))),Ss("typeOf",cs(as("string"),(()=>Zt(4,1,1,8,2)))),Ss("consentString",cs((r=2,Xn(new RegExp(`^([0-9a-fA-F]{2})([0-9a-fA-F]{${4*r}})$`,"g"))),(()=>Zt(4,1,1,8,3))))];var r;return!1===e&&t.splice(0,1),t},Ms=is(["de","at"]);function Ps(e,t){return r=>Qn(r)||[e,r,Zt(2,...t)]}const Ls=[Ss("defaultValue",Ps("de",[1,1,9,1])),Ss("typeOf",vs(as("string"),"de",[1,1,9,2])),Ss("enum",vs(Ms,"de",[1,1,9,3]))],ks=[Ss("defaultValue",Ps(!1,[1,1,10,1])),Ss("typeOf",cs(as("boolean"),(()=>Zt(4,1,1,10,2))))],js=is(["web","hyb","ctv"]),xs=[Ss("defaultValue",Ps("web",[1,1,1,11,1])),Ss("typeOf",vs(as("string"),"web",[1,1,11,2])),Ss("enum",vs(js,"web",[1,1,11,3]))],Vs=[Ss("required",cs(Qn,(()=>Zt(4,1,1,12,1)))),Ss("typeof",cs(as("string"),(()=>Zt(4,1,1,12,2)))),Ss("regex",cs(Xn(/^(data-)([a-f0-9]{10})\.([a-zA-Z0-9][a-zA-Z0-9-_]{1,63})(?:\.([a-z]{2,63}))?\.([a-z]{2,63})$/g),(()=>Zt(4,1,1,12,3))))],Fs=is(["inst","init","open","clse","play","resm","stop","fowa","bakw","recd","paus","forg","bakg","dele","refr","kill","view","alve","fini","mute","aforg","abakg","aclse","sple","scvl","serr","spyr","smdr","sfpl","sfqt","ssqt","stqt","soqt","sofc","scfc","scqt","splr","spli","sprs","spre","smrs","smre","sors","sore","sack","sapl","sapa","snsp"]),Us=[Ss("required",cs(Qn,(()=>Zt(4,1,1,13,1)))),Ss("typeof",cs(as("string"),(()=>Zt(4,1,1,13,2)))),Ss("eventEnum",cs(Fs,(()=>Zt(4,1,1,13,3))))],Gs=[Ss("defaultValue",Ps(!0,[1,1,14,1])),Ss("typeOf",cs(as("boolean"),(()=>Zt(4,1,1,14,2))))],qs=is(["debug","hybrid"]),zs=[Ss("required",cs(Qn,(()=>Zt(4,1,1,19,1)))),Ss("typeof",cs(as("string"),(()=>Zt(4,1,1,19,2)))),Ss("enum",cs(qs,(()=>Zt(4,1,1,19,2))))],$s=is(["cp","sp","xp"]),Ys=[Ss("defaultValue",Ps("cp",[1,1,20,1])),Ss("typeOf",vs(as("string"),"cp",[1,1,20,2])),Ss("enum",vs($s,"cp",[1,1,20,3]))],Bs=[Ss("required",cs(Qn,(()=>Zt(4,1,1,20,1)))),Ss("typeOf",cs(as("string"),(()=>Zt(4,1,1,20,2)))),Ss("alphanumeric",cs(Wn,(()=>Zt(4,1,1,20,3)))),Ss("min",cs(ns(3),(()=>Zt(4,1,1,19,4)))),Ss("max",cs(rs(15),(()=>Zt(4,1,1,19,5))))],Hs=is(["in","mo"]),Js=[Ss("defaultValue",Ps("in",[1,1,21,1])),Ss("typeOf",vs(as("string"),"in",[1,1,21,2])),Ss("enum",vs(Hs,"in",[1,1,21,3]))],Qs=[Ss("typeOf",cs(as(ss),(()=>Zt(4,1,1,22,1)))),Ss("between",cs(Zn(1,4),(()=>Zt(4,1,1,22,1))))],Xs=is(Is),Ws=[Ss("required",cs(Qn,(()=>Zt(4,1,1,23,1)))),Ss("typeof",cs(as("string"),(()=>Zt(4,1,1,23,2)))),Ss("enum",cs(Xs,(()=>Zt(4,1,1,23,3))))];gs(Bs),Es(Vs),hs(ks),ls(Ds()),gs(Bs),ds(Os),Es(Vs),hs(ks),ls(Ds()),fs(Gs);const Ks=[Ss("required",cs(Qn,(()=>Zt(4,1,1,23,1)))),Ss("typeOf",cs(as("string"),(()=>Zt(4,1,1,23,2))))];ls(Ds()),ms(Ls),hs(ks),ps(xs),gs(Bs),ls(Ds()),ms(Ls),hs(ks),ps(xs),gs(Bs);const Zs=[Ss("defaultValue",Ps(1,[1,1,17,1])),Ss("typeOf",vs(as("number"),1,[1,1,17,2])),Ss("max",vs(Zn(1,7),1,[1,1,17,3]))],ei=[Ss("defaultValue",Ps(1,[1,1,18,1])),Ss("typeOf",vs(as("number"),1,[1,1,18,2])),Ss("max",vs(Zn(1,7),1,[1,1,18,3]))],ti={id:1,name:"configure",abbreviation:"cf",parameters:[[gs(Bs),ds(Os),Es(Vs),hs(ks),fs(Gs),ys(Qs),ps(xs),(e=>({name:"mediaTypes",abbreviation:"mt",rules:e}))(Zs),(e=>({name:"methods",abbreviation:"mh",rules:e}))(ei),ms(Ls),ls(Ds(!1))]]},ri={id:3,name:"event",abbreviation:"ev",dependencies:[1,2],parameters:[(e=>({name:"event",abbreviation:"ev",rules:e}))(Us)]},ni={id:4,name:"hybrid",abbreviation:"hy",parameters:[[ms(Ls),hs(ks),Es(Vs),gs(Bs),(e=>({name:"hybridToken",abbreviation:"ht",rules:e}))(Ks)]]},si={id:2,name:"pageview",abbreviation:"pv",dependencies:[1],parameters:[[(e=>({name:"code",abbreviation:"cp",rules:e}))(As),(e=>({name:"comment",abbreviation:"co",rules:e}))(ws),(e=>({name:"pixelType",abbreviation:"pt",rules:e}))(Ys),ys(Qs)]]},ii={id:5,name:"setMode",abbreviation:"sm",parameters:[(e=>({name:"mode",abbreviation:"mo",rules:e}))(zs)]},ai={id:e=>Is.indexOf(e.thirdPartyModule)+6,name:"thirdPartyModules",abbreviation:"3p",dependencies:[1,2],parameters:[(e=>({name:"thirdPartyModule",abbreviation:"3p",rules:e}))(Ws),((e,...t)=>r=>e(r)?t:void 0)((e=>"qds"===e[0]),(e=>({name:"surveyType",abbreviation:"sv",rules:e}))(Js))]},oi=[ti,si,ni,ri,ii,ai];var ci=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e},ui=Be,di=He,li=m?m.isConcatSpreadable:void 0;var mi=ci,hi=function(e){return di(e)||ui(e)||!!(li&&e&&e[li])};var pi=function e(t,r,n,s,i){var a=-1,o=t.length;for(n||(n=hi),i||(i=[]);++a<o;){var c=t[a];r>0&&n(c)?r>1?e(c,r-1,n,s,i):mi(i,c):s||(i[i.length]=c)}return i};var Ei=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},fi=me,gi=function(){},yi=fi&&1/Ei(new fi([,-0]))[1]==1/0?function(e){return new fi(e)}:gi,vi=an,Si=hn,bi=pn,Oi=En,_i=yi,Ti=Ei;var Ii=function(e,t,r){var n=-1,s=Si,i=e.length,a=!0,o=[],c=o;if(r)a=!1,s=bi;else if(i>=200){var u=t?null:_i(e);if(u)return Ti(u);a=!1,s=Oi,c=new vi}else c=t?[]:o;e:for(;++n<i;){var d=e[n],l=t?t(d):d;if(d=r||0!==d?d:0,a&&l==l){for(var m=c.length;m--;)if(c[m]===l)continue e;t&&c.push(l),o.push(d)}else s(c,l,r)||(c!==o&&c.push(l),o.push(d))}return o},Ai=pi,Ni=Ii,Ri=zn,Ci=Un((function(e){return Ni(Ai(e,1,Ri,!0))}));const wi=e=>e.core?Ci(Object.keys(e.core.purpose.consents).filter((t=>!0===e.core.purpose.consents[t])).map((e=>+e)),Object.keys(e.core.purpose.legitimateInterests).filter((t=>!0===e.core.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.core.specialFeatureOptins).filter((t=>!0===e.core.specialFeatureOptins[t])).map((e=>+e+10))):Ci(Object.keys(e.purpose.consents).filter((t=>!0===e.purpose.consents[t])).map((e=>+e)),Object.keys(e.purpose.legitimateInterests).filter((t=>!0===e.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.specialFeatureOptins).filter((t=>!0===e.specialFeatureOptins[t])).map((e=>+e+10))),Di=(e,t)=>{const r=((e,t)=>e.core?Jn(Ci(Object.keys(e.core.vendorConsents).filter((t=>!0===e.core.vendorConsents[t])).map((e=>+e)),Object.keys(e.core.vendorLegitimateInterests).filter((t=>!0===e.core.vendorLegitimateInterests[t])).map((e=>+e))),t):Jn(Ci(Object.keys(e.vendor.consents).filter((t=>!0===e.vendor.consents[t])).map((e=>+e)),Object.keys(e.vendor.legitimateInterests).filter((t=>!0===e.vendor.legitimateInterests[t])).map((e=>+e))),t))(e,t),n=[];for(let s=0,i=t.length;s<i;s+=1){let i=[];const a=t[s];r.includes(a)&&(i=wi(e)),n.push(i)}return n};function Mi(e){let t="";for(let r=0,{length:n}=e;r<n;r+=1){const n=e.charCodeAt(r).toString(2);t+="00000000".slice(0,8-n.length)+n}return t}function Pi(e){if("function"==typeof atob){const t=e.replace(/_/g,"/").replace(/-/g,"+");try{return atob(t)}catch(e){throw new Error("Unable to decode transparency and consent string")}}if("function"==typeof Buffer)return Buffer.from(e,"base64").toString("binary");throw new Error("Unable to detect base64 decoder")}function Li(e){return parseInt(e,2)||0}function ki(e){return 100*Li(e)}function ji(e){const t="A".charCodeAt(),r=e.match(/.{6}/g)||[];let n="";for(let e=0,{length:s}=r;e<s;e+=1){const s=Li(r[e])+t;n+=String.fromCharCode(s)}return n}function xi(e){return Boolean(Number(e))}function Vi(e){const t=e.split(""),r={};for(let e=0,{length:n}=t;e<n;e+=1)xi(t[e])&&(r[e+1]=!0);return r}function Fi(e){function t(e,t,r,n){function s(){if(n.pubRestrictionEntry&&n.rangeEntry)for(const e in n.rangeEntry)Object.prototype.hasOwnProperty.call(n.rangeEntry,e)&&(n.pubRestrictionEntry[e]=(n.pubRestrictionEntry[e]||[]).concat(n.rangeEntry[e]));n.numPubRestrictions&&(n.numPubRestrictions-=1,e.push({key:"purposeId",size:6},{key:"restrictionType",size:2},{key:"numEntries",size:12}))}function i(){n.numEntries?(n.numEntries-=1,e.push({key:"isRange",size:1,decoder:xi},{key:"startVendorId",size:16})):s()}function a(){return!n.purposeId||[{purpose:n.purposeId,isAllowed:0!==n.restrictionType,isConsentRequired:1===n.restrictionType,isLegitimateInterestRequired:2===n.restrictionType}]}if("isRangeEncoding"===t.key)e.push(r?{key:"numEntries",size:12}:{key:"bitField",size:n.maxVendorId,decoder:Vi});else if("numEntries"===t.key)n.rangeEntry={},i();else if("isRange"===t.key)r&&e.push({key:"endVendorId",size:16});else if("startVendorId"===t.key)n.isRange||(n.rangeEntry[r]=a(),i());else if("endVendorId"===t.key){for(let e=n.startVendorId;e<=n.endVendorId;e+=1)n.rangeEntry[e]=a();i()}else"numCustomPurposes"===t.key?e.push({key:"customPurposeConsents",size:n.numCustomPurposes,decoder:Vi},{key:"customPurposeLegitimateInterests",size:n.numCustomPurposes,decoder:Vi}):"numPubRestrictions"===t.key&&(n.pubRestrictionEntry={},s())}function r(e){return e.pubRestrictionEntry||e.rangeEntry||e.bitField||e}let n=0;function s(e,t){const r=t.slice(n,n+e.size);return n+=e.size,(e.decoder||Li)(r)}function i(e,n){if(!e.queue)return s(e,n);const i={};for(let r=0;r<e.queue.length;r+=1){const a=e.queue[r],o=s(a,n);a.key&&(i[a.key]=o),t(e.queue,a,o,i)}return r(i)}function a(e,n){const s={};for(let r=0;r<e.queue.length;r+=1){const a=e.queue[r],o=i(a,n);a.key&&(s[a.key]=o),t(e.queue,a,o,s)}return r(s)}return function(){const t=function(e){if("string"!=typeof e)throw new Error("Invalid transparency and consent string specified");const t=e.split("."),r=[];for(let e=0,{length:n}=t;e<n;e+=1)r.push(Mi(Pi(t[e])));const n=Li(r[0].slice(0,6));if(2!==n)throw new Error(`Unsupported transparency and consent string version “${n}”`);return r}(e),r=function(e){const t=[{key:"purpose",queue:[{key:"consents",size:24,decoder:Vi},{key:"legitimateInterests",size:24,decoder:Vi}]}],r=[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:xi}],n=[{key:"version",size:6},{key:"created",size:36,decoder:ki},{key:"lastUpdated",size:36,decoder:ki},{key:"cmpId",size:12},{key:"cmpVersion",size:12},{key:"consentScreen",size:6},{key:"consentLanguage",size:12,decoder:ji},{key:"vendorListVersion",size:12},{key:"policyVersion",size:6},{key:"isServiceSpecified",size:1,decoder:xi},{key:"useNonStandardStacks",size:1,decoder:xi},{key:"specialFeatureOptins",size:12,decoder:Vi}].concat(t).concat({key:"purposeOneTreatment",size:1,decoder:xi},{key:"publisherCountryCode",size:12,decoder:ji},{key:"vendorConsents",queue:[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:xi}]},{key:"vendorLegitimateInterests",queue:r},{key:"publisherRestrictions",queue:[{key:"numPubRestrictions",size:12}]}),s=[{size:3}],i=[].concat(s).concat(r),a=[].concat(s).concat(r),o=[].concat(s).concat(t).concat({key:"numCustomPurposes",size:6}),c=[{key:"core",queue:n}];for(let t=1;t<e.length;t+=1){const r=Li(e[t].slice(0,3));1===r?c.push({key:"disclosedVendors",queue:i}):2===r?c.push({key:"allowedVendors",queue:a}):3===r&&c.push({key:"publisherTC",queue:o})}return c}(t),s={};for(let e=0;e<r.length;e+=1){const i=r[e],o=a(i,t[e]);i.key&&(s[i.key]=o),n=0}return s}()}const Ui=(e,t)=>{for(;e.length<t;)e=`0${e}`;return e},Gi=e=>e.map((e=>2**(e-1))).reduce(((e,t)=>e+t),0);class qi{constructor(e,t,r){Object.defineProperties(this,{type:{value:e,writable:!1,enumerable:!0,configurable:!1},value:{value:t,writeable:!1,enumerable:!0,configurable:!1},vendors:{value:r,writeable:!1,enumerable:!0,configurable:!1}})}check(e,t){const r=this.vendors.indexOf(e),n=Array.isArray(t)?t:[t];if(r>-1){let e=Gi(n);if(r<this.vendors.length-1){let t=e.toString(16);t=((e,t)=>{for(;e.length<t;)e=`${e}0`;return e})(t,4*(this.vendors.length-r)-(4-t.length)),e=parseInt(t,16)}return(this.value&e)===e}return!1}toString(e=16){return 2===e?`${Ui(this.type.toString(2),8)}${Ui(this.value.toString(2),16*this.vendors.length)}`:`${Ui(this.type.toString(e),2)}${Ui(this.value.toString(e),4*this.vendors.length)}`}static create(e,t,r=qi.TYPES.TCF2X){let n="";for(let r=0,s=e.length;r<s;r+=1){const e=Gi(t[r]).toString(16);n+=Ui(e,4)}return n=parseInt(n,16),new qi(r,n,e)}}qi.TYPES=Object.defineProperties({},{NONE:{value:0,writeable:!1,enumerable:!0,configurable:!1},TCF2X:{value:1,writeable:!1,enumerable:!0,configurable:!1},CUSTOM:{value:255,writeable:!1,enumerable:!0,configurable:!1}});class zi extends U{constructor(e){super(),this.vendors=e,this.ioConsentString=void 0}convert(e){try{if(e){const t=Di(e,this.vendors);return this.ioConsentString=qi.create(this.vendors,t),this.emit(zi.EVENTS.TCF_CONVERT_SUCCESS,{ioConsentString:this.ioConsentString}),this.ioConsentString}throw new Mt(Mt.TYPES.ERROR,3,3,2,1)}catch(e){const t=new Mt(Mt.TYPES.ERROR,3,3,2,2,e instanceof Mt?e:e.message);return void this.emit(zi.EVENTS.TCF_CONVERT_FAILED,t)}}}zi.EVENTS={TCF_CONVERT_SUCCESS:"TCF_CONVERT_SUCCESS",TCF_CONVERT_FAILED:"TCF_CONVERT_FAILED"};class $i extends U{constructor(){super(),this.tcString=void 0,this.tcData=void 0}parse(e){try{return this.tcString=e,this.tcData=Fi(e),this.emit($i.EVENTS.TCF_PARSING_SUCCESS,{tcString:this.tcString,tcData:this.tcData}),this.tcData}catch(e){const t=new Mt(Mt.TYPES.ERROR,3,1,1,1,e.message);throw this.emit($i.EVENTS.TCF_PARSING_FAILED,t),t}}}$i.EVENTS={TCF_PARSING_FAILED:"TCF_PARSING_FAILED",TCF_PARSING_SUCCESS:"TCF_PARSING_SUCCESS"};class Yi extends U{constructor(e,t){super(),this.moduleId=2,this.manager=e,this.modules=new Map(t.map((e=>[e.name,{...e,queue:new qt(void 0,{mode:qt.MODE.MANUAL}),active:!1}])))}addFacade(e,t){const r=this.modules.get(e);r.queue.addFacadeFactory(t),this.modules.set(e,r)}removeFacade(e){const t=this.modules.get(e);t.queue.removeFacadeFactory(),this.modules.set(e,t)}activate(e){const t=this.modules.get(e);t.active=!0,t.queue.options.mode=qt.MODE.AUTO,t.queue.dequeue(),this.modules.set(e,t)}deactivate(e){const t=this.modules.get(e);t.active=!1,t.queue.options.mode=qt.MODE.MANUAL,t.queue.flush(),this.modules.set(e,t)}enqueue(e,t={}){try{this.modules.forEach((r=>{r.mapping&&r.mapping[e]?(t=r.mapping[e].params(this.manager),e=r.mapping[e].command,"array"===Kt(t)?r.queue.enqueue(e,...t):r.queue.enqueue(e,t)):r.queue.enqueue(e,t)}))}catch(e){const t=new Mt(3,1,this.moduleId,1,1,e);throw this.emit(Yi.EVENTS.ENQUEUE_ERROR,t),t}}dequeue(){try{this.modules.forEach((e=>{e.queue.dequeue()}))}catch(e){const t=new Mt(3,1,this.moduleId,2,1,e);throw this.emit(Yi.EVENTS.ENQUEUE_ERROR,t),t}}}Yi.EVENTS={MODULE_NOT_LOADED:"MODULE_NOT_LOADED",QUEUE_CREATION_ERROR:"QUEUE_CREATION_ERROR",QUEUE_DOES_NOT_EXIST:"QUEUE_DOES_NOT_EXIST",ENQUEUE_ERROR:"ENQUEUE_ERROR",DEQUEUE_ERROR:"DEQUEUE_ERROR"};const Bi=e=>{const{category:t,validated:r}=e;if(!r){if(!t||!Object.values(Hi.CATEGORIES).includes(t))throw new Mt(4,1,3,1,1);e.validated=!0}};class Hi extends U{constructor(){super(),this.moduleId=3,this.data=void 0}setItem(e,t,r){try{Bi(r);const{category:n}=r;void 0===this.data&&(this.data={global:{},measurement:{},sensor:{},feature:{},plugins:{},thirdPartyPlugins:{},tcf:{}}),this.data[n][e]=t,this.emit(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.SET,n,e),{key:e,value:t,category:n})}catch(e){throw new Mt(4,1,this.moduleId,2,1,e instanceof Mt?e:e.message)}}setItems(e,t,r){Bi(r);for(let n=0,s=e.length;n<s;n+=1)this.setItem(e[n],t[n],r)}deleteItem(e,t){try{if(Bi(t),this.data){const{category:r}=t;delete this.data[r][e],this.emit(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.DELETE,r,e),{key:e,category:r})}}catch(e){throw new Mt(4,1,this.moduleId,4,1,e.message)}}deleteItems(e,t){Bi(t);for(let r=0,n=e.length;r<n;r+=1)this.deleteItem(e[r],t)}getItem(e,t){try{Bi(t);const{category:r}=t,n={key:e,category:r,value:void 0};return this.data&&this.data[r]&&void 0!==this.data[r][e]&&(n.value=this.data[r][e]),n}catch(e){throw new Mt(4,1,this.moduleId,6,1,e.message)}}getItems(e,t){Bi(t);const r=[];for(let n=0,s=e.length;n<s;n+=1)r.push(this.getItem(e[n],t));return r}static generateDataMutationEventName(e,t,r){return`data.mutation.${`${e}.${t}.${r}`.toLowerCase()}`}}Hi.CATEGORIES={GLOBAL:"global",MEASUREMENT:"measurement",SENSOR:"sensor",FEATURE:"feature",PLUGINS:"plugins",THIRD_PARTY_PLUGINS:"thirdPartyPlugins",TCF:"tcf",BUNDLE_ACTIVE:"bundleActive"},Hi.MUTATION_EVENTS={SET:"SET",DELETE:"DELETE"};const Ji={iomb:"IOMb",ioma:"IOMa",iomp:"iom"};class Qi extends U{constructor(e){if(super(),this.moduleId=4,void 0===e)throw new Mt(4,1,this.moduleId,1,1);this.dataLayer=e}load(t,r,n=!1){return new Promise(((s,i)=>{try{const a={category:Hi.CATEGORIES.SENSOR},o=this.dataLayer.getItem(r,a);if(o&&void 0===o.value){const o={url:t,async:!0};r===Qi.SENSOR_VARIANTS.IOMB&&(o.crossOrigin="anonymous"),e(o).then((()=>{const e=Ji[r],t=window[e];t?(n||delete window[e],this.dataLayer.setItem(r,"function"==typeof t?t:()=>t,a),s()):i(new Mt(3,1,this.moduleId,2,2))})).catch((e=>{i(new Mt(3,1,this.moduleId,2,1,e.message))}))}else s()}catch(e){i(new Mt(3,1,this.moduleId,2,3,e.message))}}))}generateSensorUrl(e){if(void 0===e.cdn||void 0===e.sensorVariant)throw new Mt(3,1,this.moduleId,3,1);const t=[];if(t.push(e.cdn),!1===e.static){t.push(e.sensorVariant),t.push("latest"),t.push("sensor"),t.push("manager"),t.push("base");const r=window[window.IOMmGlobalObject].esm?"es6":"es5";if(t.push(r),e.sensorVariant===Qi.SENSOR_VARIANTS.IOMA){const e=window.crypto&&window.crypto.subtle?"native":"legacy";t.push(e)}t.push("bundle.js")}return`//${t.join("/")}`}}Qi.SENSOR_VARIANTS={IOMB:"iomb",IOMA:"ioma",IOMP:"iomp"};const Xi=e=>(t,{key:r,value:n})=>{const s=e[r];return s&&(t[s]=n),t};var Wi={sensors:{iomb:{bit:1,cdn:{id:0,static:!1}},ioma:{bit:2,tcf:{consent:[1,8],vendor:730},cdn:{id:0,static:!1}},iomp:{bit:4,tcf:{consent:[1,8],vendor:730},cdn:{id:1,static:!0},mapping:{pageview:{command:"count",params:(e,t={site:"st",code:"cp",comment:"co",country:"cn"})=>{const r={...e.dataLayer.getItems(["site","country"],{category:"global"}).reduce(Xi(t),{}),...e.dataLayer.getItems(["code","comment"],{category:"measurement"}).reduce(Xi(t),{})},{value:n}=e.dataLayer.getItem("consentString",{category:"tcf"});return r.ct=n instanceof qi?n.toString(16):new qi(qi.TYPES.TCF2X,0,[730,785]).toString(16),r.sv=(()=>{const t=e.commandProcessor.commandQueue.queue.items.find((([e,t])=>"3p"===e&&"qds"===t));let r="ke";if(t){const[,,e]=t;r="mo"===e?e:"i2"}return r})(),r.sc="yes",[r,1]}},event:{command:"event",params:e=>{const{value:t}=e.dataLayer.getItem("event",{category:"measurement"});return t}}}}},modules:{qds:{cdn:1,tcf:{consent:[1,9],vendor:785}},dcf:{cdn:1,tcf:{consent:[1,7],vendor:785}}},tcf:{vendors:[730,785],frequency:100,max:10,wait:5e3,events:["tcloaded","useractioncomplete"]},cdn:["cdn","script.ioam.de/iam.js?m=1"],hybrid:{performSiteCheck:!1,apiKeys:{ios:"IOMbHybridMessageHandler",android:"IOMbHybridBridge"}}};const Ki=e=>{window.__tcfapi("removeEventListener",2,(()=>{}),e)},Zi=(e,t)=>{e&&e.listenerId>=0&&(t.stopPolling?Ki(e.listenerId):t.tcfApiListenerIds.push(e.listenerId))},ea=e=>(t,r)=>{try{if(Zi(t,e),e.stopPolling)return;let n;r&&Wi.tcf.events.includes(t.eventStatus)&&!0===t.gdprApplies?(n=e.convert(t),e.emit(ra.EVENTS.TCF_DATA_PROCESSED),window.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId)):(n=qi.create(e.vendors,[[0],[0]],qi.TYPES.TCF2X),e.emit(ra.EVENTS.TCF_DATA_CANNOT_BE_PROCESSED)),e.dataLayer.setItem("consentString",n,{category:Hi.CATEGORIES.TCF})}catch(t){const r=new Mt(Mt.TYPES.ERROR,3,6,1,1,t.message);e.emit(ra.EVENTS.TCF_DATA_PROCESSING_ERROR,r)}},ta=e=>{e.stopPolling||(window.__tcfapi&&"function"==typeof window.__tcfapi?(window.__tcfapi("addEventListener",2,ea(e)),window.__tcfapi("addEventListener",2,(e=>(t,r)=>{Zi(t,e),e.stopPolling||r&&"cmpuishown"===t.eventStatus&&window.__tcfapi("addEventListener",2,ea(e))})(e))):(e.numberOfTries<Wi.tcf.max+1?setTimeout((()=>{ta(e)}),e.numberOfTries<Wi.tcf.max?Wi.tcf.frequency:Wi.tcf.wait):e.emit(ra.EVENTS.TCF_API_NOT_ACCESSIBLE),e.numberOfTries+=1))};class ra extends zi{constructor(e,t){super(e),this.moduleId=6,this.vendors=e,this.dataLayer=t,this.numberOfTries=0,this.stopPolling=!1,this.tcfApiListenerIds=[]}process(){try{ta(this)}catch(e){const t=new Mt(Mt.TYPES.ERROR,3,this.moduleId,5,1,e.message);throw this.emit(ra.EVENTS.TCF_DATA_PROCESSING_ERROR,t),t}}stop(){try{this.tcfApiListenerIds.forEach((e=>{Ki(e)})),this.stopPolling=!0}catch(e){const t=new Mt(Mt.TYPES.ERROR,3,this.moduleId,6,1,e.message);throw this.emit(ra.EVENTS.TCF_API_CANNOT_STOP,t),t}}}ra.EVENTS={TCF_DATA_PROCESSED:"TCF_DATA_PROCESSED",TCF_DATA_CANNOT_BE_PROCESSED:"TCF_DATA_CANNOT_BE_PROCESSED",TCF_API_NOT_ACCESSIBLE:"TCF_API_NOT_ACCESSIBLE",TCF_DATA_PROCESSING_ERROR:"TC_DATA_PROCESSING_ERROR",TCF_API_CANNOT_STOP:"TCF_API_CANNOT_STOP"};const na=1,sa=2,ia=3,aa=(e=na)=>{const t=[];return e!==na&&e!==sa||Object.keys(Wi.sensors).forEach((e=>{t.push({name:e,...Wi.sensors[e]})})),e!==na&&e!==ia||Object.keys(Wi.modules).forEach((e=>{t.push({name:e,...Wi.modules[e]})})),t},oa=(new Date).getTime().toString(16),ca=(e,t)=>{try{const{value:r}=t.dataLayer.getItem("methods",{category:Hi.CATEGORIES.GLOBAL});e.filter((e=>(r&e.bit)===e.bit)).forEach((r=>{let n=!r.tcf;if(r.tcf){const{value:s}=t.dataLayer.getItem("consentString",{category:Hi.CATEGORIES.TCF});s&&s instanceof qi?(n=s.check(r.tcf.vendor,r.tcf.consent),n?(t.commandDispatcher.activate(r.name),t.dataLayer.on(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.SET,Hi.CATEGORIES.TCF,"consentString"),(()=>((e,t)=>{try{e.filter((e=>{const{value:r}=t.dataLayer.getItem("methods",{category:Hi.CATEGORIES.GLOBAL});return r&e.bit==e.bit})).forEach((e=>{if(e.tcf){const{value:r}=t.dataLayer.getItem("consentString",{category:Hi.CATEGORIES.TCF});if(r&&r instanceof qi)if(!1===r.check(e.tcf.vendor,e.tcf.consent))t.commandDispatcher.removeFacade(e.name),t.commandDispatcher.deactivate(e.name);else{const r=t.dataLayer.getItem(e.name,{category:Hi.CATEGORIES.SENSOR});r&&r.value?(t.commandDispatcher.addFacade(e.name,r.value),t.commandDispatcher.activate(e.name)):ca([e],t)}}}))}catch(e){t.emit(ua.EVENTS.EXECUTION_ERROR,e)}})(aa(sa),t)))):t.dataLayer.once(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.SET,Hi.CATEGORIES.TCF,"consentString"),(()=>{ca(e,t)}))):t.dataLayer.once(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.SET,Hi.CATEGORIES.TCF,"consentString"),(()=>{ca(e,t)}))}else t.commandDispatcher.activate(r.name);const s=t.dataLayer.getItem(r.name,{category:Hi.CATEGORIES.SENSOR});if(s.value)t.commandDispatcher.addFacade(r.name,s.value);else if(n){t.dataLayer.once(Hi.generateDataMutationEventName(Hi.MUTATION_EVENTS.SET,Hi.CATEGORIES.SENSOR,r.name),(()=>{ca([r],t)}));const e=0===r.cdn.id?t.dataLayer.getItem("domainServiceName",{category:Hi.CATEGORIES.GLOBAL}).value:Wi.cdn[r.cdn.id];t.bundleLoader.load(t.bundleLoader.generateSensorUrl({cdn:e,static:r.cdn.static,sensorVariant:r.name}),r.name,r.cdn.static).catch((e=>{t.emit(ua.EVENTS.EXECUTION_ERROR,e)}))}}))}catch(e){t.emit(ua.EVENTS.EXECUTION_ERROR,e)}};class ua extends U{constructor(e){super(),this.moduleId=1,this.commandQueue=e,this.commandProcessor=new us(e,oi,{fillParameters:!0,maxExecutionBeforeStop:3}),this.dataLayer=new Hi,this.commandDispatcher=new Yi(this,aa()),this.bundleLoader=new Qi(this.dataLayer),this.tcfProcessor=new ra(Wi.tcf.vendors,this.dataLayer),this.skipExecution=!1,this.checkForHybridParameters=!1,this.tcfProcessor.process()}command(e,...t){try{this.commandProcessor.commandSerializer.reset();const n=this.commandProcessor.process(e,...t);if(n&&n.parameters){switch(e){case ua.COMMANDS.CONFIGURE:if(n.parameters.consentString){const e=((e,t)=>{try{const r=new qi(qi.TYPES.NONE,parseInt(e.substring(2),16),Wi.tcf.vendors);if(r.toString(16)!==`00${e.substring(2)}`)throw new Mt(Mt.TYPES.ERROR,3,1,3,1);return t.tcfProcessor.stop(),r}catch(e){return t.emit(ua.EVENTS.MANUAL_CONSENT_ERROR,e),null}})(n.parameters.consentString,this);e&&e instanceof qi?(n.parameters.consentString=e.toString(16),this.dataLayer.setItem("consentString",e,{category:Hi.CATEGORIES.TCF})):null===e&&delete n.parameters.consentString}this.dataLayer.setItems(Object.keys(n.parameters),Object.values(n.parameters),{category:Hi.CATEGORIES.GLOBAL}),ca(aa(sa),this);break;case ua.COMMANDS.PAGEVIEW:this.dataLayer.deleteItem("event",{category:Hi.CATEGORIES.MEASUREMENT}),this.dataLayer.setItems(Object.keys(n.parameters),Object.values(n.parameters),{category:Hi.CATEGORIES.MEASUREMENT});const{value:e}=this.dataLayer.getItem("hybrid",{category:Hi.CATEGORIES.GLOBAL});if(e){const{value:e}=this.dataLayer.getItem("hybridParameters",{category:Hi.CATEGORIES.MEASUREMENT});if(!this.checkForHybridParameters)if(e){const t=`___${e.prefix}___${e.site}___${n.parameters.code}`,r={...n.parameters,code:t};this.checkForHybridParameters=!0,this.command(ua.COMMANDS.PAGEVIEW,r),this.skipExecution=!0}else{const e=(r=Wi.hybrid.apiKeys,window.webkit&&window.webkit.messageHandlers&&r.ios in window.webkit.messageHandlers&&"function"==typeof window.webkit.messageHandlers[r.ios].postMessage?"ios":r.android in window?"android":"");Object.keys(Wi.hybrid.apiKeys).includes(e)&&(((e=window,t,r,n,s)=>{if("ios"===t){const t=JSON.stringify({type:"request",payload:{globalObject:n,command:"hybrid",token:s}});e.webkit.messageHandlers[r].postMessage(t)}else"android"===t&&e[r].getNativeAppData(n,"hybrid",s)})(window,e,Wi.hybrid.apiKeys[e],window.IOMmGlobalObject,oa),this.skipExecution=!0)}}break;case ua.COMMANDS.HYBRID:if(!((e,t)=>{try{const[{value:r},{value:n},{value:s}]=t.dataLayer.getItems(["site","checkSite","appSite"],{category:Hi.CATEGORIES.GLOBAL});if(e.hybridToken!==oa){const e=new Mt(Mt.TYPES.ERROR,3,1,2,1);return t.emit(ua.EVENTS.EXECUTION_ERROR,e),!1}Wi.hybrid.performSiteCheck&&n&&e.site;const i={domainServiceName:e.domainServiceName,site:e.site,distributionChannel:"hyb",country:e.country};t.dataLayer.getItems(["appSite","debug","hybrid","tenant","mediaTypes","methods"],{category:Hi.CATEGORIES.GLOBAL}).forEach((e=>{i[e.key]=e.value})),i.debug=e.debug?e.debug:i.debug;const a={};t.dataLayer.getItems(["code","comment","pixelType","tenant"],{category:Hi.CATEGORIES.MEASUREMENT}).forEach((e=>{a[e.key]=e.value}));const o=e.site===r?"hyb2":"hyb";a.code=`___${o}___${r}___${a.code}`;const{value:c}=t.dataLayer.getItem("methods",{category:Hi.CATEGORIES.GLOBAL});return c!==Wi.sensors.iomb.bit&&c!==Wi.sensors.iomb.bit+Wi.sensors.iomp.bit||t.dataLayer.setItem("hybridParameters",{code:a.code,prefix:o,site:r},{category:Hi.CATEGORIES.MEASUREMENT}),t.command(ua.COMMANDS.CONFIGURE,i),t.checkForHybridParameters=!0,t.command(ua.COMMANDS.PAGEVIEW,a),!0}catch(e){const r=new Mt(Mt.TYPES.ERROR,3,1,2,3,e);return t.emit(ua.EVENTS.EXECUTION_ERROR,r),!1}})(n.parameters,this)){const e={};this.dataLayer.getItems(["code","comment","pixelType","tenant"],{category:Hi.CATEGORIES.MEASUREMENT}).forEach((t=>{e[t.key]=t.value})),this.checkForHybridParameters=!0,this.command(ua.COMMANDS.PAGEVIEW,e)}this.skipExecution=!0;break;case ua.COMMANDS.EVENT:this.dataLayer.setItem("event",n.parameters.event,{category:Hi.CATEGORIES.MEASUREMENT})}return!1===this.skipExecution&&this.commandDispatcher.enqueue(e,n.parameters),this.skipExecution=!1,void(this.checkForHybridParameters=!1)}throw new Mt(Mt.TYPES.FATAL,3,1,1,1,this.commandProcessor.commandSerializer.lastAssertion)}catch(e){throw e instanceof Mt?e:new Mt(Mt.TYPES.FATAL,3,1,1,2,e.message)}var r}}function da(e){const t=new ua(e);return{cf(...e){t.command(ua.COMMANDS.CONFIGURE,...e)},configure(...e){t.command(ua.COMMANDS.CONFIGURE,...e)},pv(...e){t.command(ua.COMMANDS.PAGEVIEW,...e)},pageview(...e){t.command(ua.COMMANDS.PAGEVIEW,...e)},sm(...e){t.command(ua.COMMANDS.SET_MODE,...e)},setMode(...e){t.command(ua.COMMANDS.SET_MODE,...e)},"3p"(...e){t.command(ua.COMMANDS.THIRD_PARTY_MODULE,...e)},thirdPartyModule(...e){t.command(ua.COMMANDS.THIRD_PARTY_MODULE,...e)},event(...e){t.command(ua.COMMANDS.EVENT,...e)},ev(...e){t.command(ua.COMMANDS.EVENT,...e)},hybrid(...e){t.command(ua.COMMANDS.HYBRID,...e)},hy(...e){t.command(ua.COMMANDS.HYBRID,...e)}}}let la;ua.COMMANDS={CONFIGURE:"configure",PAGEVIEW:"pageview",HYBRID:"hybrid",EVENT:"event",SET_MODE:"setMode",THIRD_PARTY_MODULE:"thirdPartyModule"},ua.EVENTS={COMMAND_DOES_NOT_EXIST:"COMMAND_DOES_NOT_EXIST",EXECUTION_ERROR:"EXECUTION_ERROR",MANUAL_CONSENT_ERROR:"MANUAL_CONSENT_ERROR"},"IOMmGlobalObject"in window&&(la=window[window.IOMmGlobalObject]),la||(la=window.IOMm),la.q=new qt(da,{multiTenancy:!0},la.q),la.create=da}();
